# 右侧画布显示测试指南

## 🎯 测试目标
验证右侧画布能够正确显示，并测试从对话模式切换到创作模式的完整流程。

## 📋 测试步骤

### 1. 基础布局测试
1. 访问 https://kehan857.github.io/shipinhunjian2qi/
2. 点击"登录/注册"进入工作台
3. 确认左侧边栏、中间对话区、右侧空白区域布局正常

### 2. 触发创作模式测试
**方法一：快捷提示词触发**
1. 在对话区点击"批量生成产品展示视频"快捷提示词
2. 观察AI回复是否包含批量视频生成器组件
3. 点击组件中的"生成所有视频"按钮
4. 验证右侧画布是否显示视频混剪智能体界面

**方法二：手动输入触发**
1. 在输入框输入包含"视频"、"混剪"或"批量"的消息
2. 发送消息，观察AI回复
3. 点击生成的UGI组件中的操作按钮
4. 验证右侧画布显示

**方法三：URL参数触发**
1. 直接访问：https://kehan857.github.io/shipinhunjian2qi/?agent=video-mixer
2. 验证页面是否直接进入创作模式，右侧画布显示

### 3. 画布功能测试
1. 确认右侧画布显示视频混剪智能体界面
2. 测试画布顶部的控制按钮：
   - 收起/展开对话区按钮
   - 全屏按钮
   - 更多选项按钮
3. 验证画布内容区显示四步骤创作流程

### 4. 交互流程测试
1. 从对话模式切换到创作模式
2. 从创作模式切换回对话模式
3. 验证布局切换动画流畅
4. 确认状态保持正确

## 🔧 技术实现说明

### 核心逻辑
```typescript
// 布局模式控制
const layoutMode = ref<'chat' | 'creation'>('chat')

// 激活智能体进入创作模式
const enterCreationMode = (agentId: string) => {
  activeAgent.value = agentId
  layoutMode.value = 'creation'
}
```

### UGI事件处理
```typescript
// 处理UGI组件事件
const handleUgiEvent = (type: string, data: any) => {
  switch (type) {
    case 'select':
      if (data.agentId) {
        workspaceStore.enterCreationMode(data.agentId)
      }
      break
  }
}
```

### 组件渲染逻辑
```vue
<!-- 主画布 (条件渲染，动态宽度) -->
<div 
  v-if="workspaceStore.isCreationMode"
  class="main-canvas-container flex-1 transition-all duration-300 ease-in-out"
>
  <MainCanvas />
</div>
```

## 🎨 预期效果

### 对话模式 (layoutMode: 'chat')
- 左侧边栏：固定16px宽度
- 中间对话区：占满剩余空间 (w-full)
- 右侧画布：隐藏

### 创作模式 (layoutMode: 'creation')
- 左侧边栏：固定16px宽度  
- 中间对话区：固定1/3宽度 (w-1/3)
- 右侧画布：占满剩余空间 (flex-1)

## 🐛 故障排除

### 问题1：右侧画布不显示
**原因**：layoutMode仍为'chat'
**解决**：检查UGI事件是否正确触发enterCreationMode

### 问题2：UGI组件不显示
**原因**：ChatMessage组件缺少UGI事件监听
**解决**：确认@ugi-event="handleUgiEvent"已添加

### 问题3：布局切换卡顿
**原因**：CSS过渡动画配置问题
**解决**：检查transition-all duration-300类名

## ✅ 成功标准

1. **布局正确**：三种布局模式切换流畅
2. **功能完整**：UGI组件能正确触发创作模式
3. **交互顺畅**：点击操作响应及时
4. **状态一致**：页面刷新后状态保持正确

---

**测试完成后，右侧画布应该能够正常显示视频混剪智能体的完整界面！** 🎉
