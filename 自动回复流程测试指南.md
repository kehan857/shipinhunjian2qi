# 自动回复流程测试指南

## 🎯 功能说明

实现了从首页输入后自动进入回复流程和智能体识别的完整功能：

### 核心功能
1. **自动回复流程**：首页输入后进入工作台自动开始对话
2. **意图识别**：根据用户输入自动识别需要的智能体
3. **智能体激活**：自动激活对应的智能体并进入创作模式
4. **默认智能体**：未识别到具体意图时默认使用视频混剪智能体

## 📋 测试步骤

### 1. 基础自动回复测试
1. 访问 https://kehan857.github.io/shipinhunjian2qi/
2. 在首页输入框中输入任意内容（如："帮我制作一个产品宣传视频"）
3. 点击"开始创作"按钮
4. 观察是否自动跳转到工作台页面
5. 验证是否自动发送用户消息并开始AI回复

### 2. 意图识别测试

**视频相关意图测试：**
- 输入："制作一个产品宣传视频" → 应识别为 `video-mixer`
- 输入："帮我剪辑一段vlog" → 应识别为 `video-mixer`
- 输入："生成短视频内容" → 应识别为 `video-mixer`

**文案相关意图测试：**
- 输入："帮我改写这个文案" → 应识别为 `content-rewrite`
- 输入："创作营销内容" → 应识别为 `content-rewrite`

**社媒相关意图测试：**
- 输入："制定社交媒体营销策略" → 应识别为 `social-media`
- 输入："小红书内容规划" → 应识别为 `social-media`

**设计相关意图测试：**
- 输入："设计品牌海报" → 应识别为 `brand-design`
- 输入："制作logo设计" → 应识别为 `brand-design`

**数据分析意图测试：**
- 输入："分析营销数据" → 应识别为 `data-analysis`
- 输入："生成ROI报告" → 应识别为 `data-analysis`

**营销策划意图测试：**
- 输入："制定营销活动策划" → 应识别为 `campaign-manager`
- 输入："推广方案设计" → 应识别为 `campaign-manager`

### 3. 默认智能体测试
1. 输入无法明确识别的内容（如："你好"、"帮我一下"）
2. 验证是否默认激活视频混剪智能体

### 4. 智能体激活测试
1. 完成上述任一测试后，观察右侧画布是否显示
2. 验证是否自动进入创作模式（右侧画布显示对应智能体界面）
3. 检查画布标题是否正确显示识别的智能体名称

## 🔧 技术实现

### 意图识别算法
```typescript
const detectIntent = (text: string): string => {
  const videoKeywords = ['视频', '混剪', '剪辑', '制作视频', '生成视频', '短视频', 'vlog', '宣传片']
  const contentKeywords = ['文案', '内容', '文章', '写作', '文案改写', '内容创作']
  const socialKeywords = ['社媒', '社交媒体', '微博', '抖音', '小红书', '营销']
  const designKeywords = ['设计', '海报', 'logo', '品牌', '视觉', '图片']
  const dataKeywords = ['数据', '分析', '报告', '统计', 'roi', '转化']
  const campaignKeywords = ['策划', '营销', '活动', '推广', 'campaign']
  
  // 根据关键词匹配返回对应智能体ID
  // 默认返回 'video-mixer'
}
```

### 自动回复流程
```typescript
const startAutoConversation = async (prompt: string) => {
  // 1. 自动发送用户消息
  chatStore.sendMessage(prompt)
  
  // 2. 识别意图并激活对应智能体
  const detectedAgent = detectIntent(prompt)
  
  // 3. 延迟激活智能体，让AI回复先完成
  setTimeout(() => {
    workspaceStore.enterCreationMode(detectedAgent)
  }, 3000) // 3秒后激活智能体
}
```

## ✅ 预期效果

### 完整流程
1. **首页输入** → 自动跳转工作台
2. **自动发送** → 用户消息自动发送
3. **AI回复** → 显示智能体介绍和确认
4. **意图识别** → 后台识别用户需要的智能体
5. **激活智能体** → 3秒后自动激活对应智能体
6. **进入创作** → 右侧画布显示智能体界面

### 用户体验
- **无缝衔接**：从首页到创作模式一步到位
- **智能识别**：自动识别用户意图，无需手动选择
- **即时反馈**：AI立即回复并激活对应功能
- **默认兜底**：未识别时默认使用视频混剪智能体

## 🐛 故障排除

### 问题1：自动回复不启动
**原因**：URL参数未正确传递
**解决**：检查首页跳转是否携带prompt参数

### 问题2：意图识别错误
**原因**：关键词匹配不准确
**解决**：扩展关键词列表或优化匹配算法

### 问题3：智能体未激活
**原因**：延迟时间设置问题
**解决**：调整setTimeout延迟时间

---

**测试完成后，用户应该能够体验到从首页输入到智能体激活的完整自动化流程！** 🎉
